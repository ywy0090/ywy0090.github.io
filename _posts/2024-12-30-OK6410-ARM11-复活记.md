---
title: 复活记 OK6410 ARM11
date: 2024-12-30 09:00:00 +0800
categories: [嵌入式, ARM]
tags: [ok6410, arm11, linux, 嵌入式系统]
image: /assets/img/post/ok6410/ok6410_board.png  # Optional: 如果需要添加头图
toc: true                  # Optional: 目录
math: false               # Optional: 如果需要使用数学公式则设为 true
mermaid: false           # Optional: 如果需要使用 mermaid 图表则设为 true
---

# 引言

简要介绍 OK6410 ARM11 开发板的复活过程。

## 背景

OK6410 是一款基于三星 S3C6410 ARM11 处理器的开发板。本文记录了将其重新启动的过程。

## 硬件设置

### 开发板组件
- 三星 S3C6410 ARM11 处理器 (ARM1176JZF-S 内核)
- 128MB DDR SDRAM 内存
- 1GB NAND Flash 存储
- 4.3寸触摸显示屏
- 5V DC 供电接口
- 丰富的外设接口:
  - 核心板采用6层PCB设计，性能稳定可靠
  - 4个串口(1个RS232 DB9接口和3个TTL电平串口)
  - 100M以太网接口(DM9000AE芯片)
  - USB Host和USB Slave接口
  - SD卡接口(可选配WIFI模块)
  - 3个3.5mm音频接口(音频输出、麦克风输入、线路输入)
  - 支持多种尺寸LCD显示屏(3.5-10寸)和LVDS接口
  - CVBS视频输出接口
  - CMOS摄像头接口
  - JTAG调试接口
  - 温度传感器接口(选配DS18B20)
  - 红外接收、LED指示灯、蜂鸣器
  - 3个扩展接口(支持AD/DA、IO、SPI、矩阵键盘等)

### 初始测试

翻箱倒柜终于找到了这个老伙计！十多年的光阴让它裹了厚厚一层灰，不过既然决定让它重获新生，那就先来个"体检"：

- 电源要求
  - 第一次上电时脑子一抽，给它接了个12V的"大力水手"变压器（真是作死啊！）
  - 板子发出"嗡嗡"的抗议声，赶紧拔掉电源（对不起对不起！）
  - 这下可吓坏我了，赶紧翻出OK6410文档 —— 啊哈！原来是5V供电
  - 找到合适的5V电源后，用万用表确认了下：完美的5V输出！
  - 重新通电，板子欢快地亮起了LED，看来是原谅我的莽撞了~
  
- 基本连接检查
  - 接口倒是都还在，就是覆盖了一层岁月的痕迹
  - 用酒精棉球小心翼翼地清理了下各个接口
  - 排针有点发黄，不过看起来还能用
  
- LED 指示灯状态
  - 按下电源的一刻还是有点紧张的...咦，电源灯亮了！
  - 系统指示灯在微弱地闪烁，但显示器一直白屏
  - 看来需要重装系统，但发现缺少很多必需品：
    - 串口线不见了（用来调试和烧写）
    - SD卡也找不到（用来存放系统镜像）
  - 虽然有几个LED没反应，但至少主板还能工作，有救！

- 寻找串口线
  - 终于找到了RS232转USB的线："啊哈！就是你了！"
  - 插上电脑：设备管理器里多了个COM口，完美！
  - 小贴士：如果找不到合适的线，淘宝上20块钱就能买个新的

- 8G SD卡大采购
  - 翻遍了抽屉，找不到2GB和4GB的老卡
  - 这年头谁还用这么小的卡啊？上网购物！
  - 选购要点：
    - 容量：8GB足够了（别贪心买太大，老设备未必认）
    - 速度等级：Class 4就够用（追求Class 10反而可能不兼容）
    - 品牌：靠谱的老牌子（闪迪、金士顿什么的）
  - 等快递的日子里，先把其他准备工作做起来~

## 软件环境

### 时光倒流：搭建PC端开发环境
- 穿越回XP时代
  - 现代Win10："抱歉，我不认识这个老古董~" 
  - OK6410："那是你太年轻了，让我们回到2008年吧！"
  - 拿出VMware这台时光机，安装一个Windows XP SP3
  - 温馨提示：给虚拟机2GB内存，40GB硬盘，USB 2.0支持（老古董也要吃得饱嘛）
  - VMware Player下载地址：[https://softwareupdate.vmware.com/cds/vmw-desktop/player/](https://softwareupdate.vmware.com/cds/vmw-desktop/player/)
    - 免费版足够用了，不用花钱买Pro版
    - 选择对应系统的版本下载
    - 安装时记得勾选USB支持

- 考古发掘：安装远古开发工具
  - DNW下载工具 —— 开发板的最佳搭档
  - SecureCRT —— 串口调试必备神器

### 老兵武器库
- 交叉编译工具链
  - arm-linux-gcc 4.3.2（编译器界的老将军）
  - arm-none-eabi-gcc（裸机开发的老司机）

- DNW神器配置
  - COM口：找对口，不然尴尬了
  - 波特率：115200（快得很！）
  - 8位数据位，1位停止位，无校验（标配啦）
  - 记得先按住开发板的烧写按键再上电（这个姿势很重要）

### 系统三剑客
- Windows CE 6.0镜像（专为ARM处理器优化）
- NK.bin（Windows CE的内核文件）
- eboot.bin（Windows CE的引导程序）

准备SD卡烧录工具：
- SDFormatter（格式化SD卡）
- Win32DiskImager（写入系统镜像）
- SD卡烧录步骤：
  1. 用SDFormatter格式化SD卡
  2. 用Win32DiskImager写入NK.bin
  3. 复制eboot.bin到SD卡根目录

## 故障排除步骤

记录板子复活过程中采取的步骤：

### 启动模式设置
- 调整SW2开关引脚，切换启动模式

| SW2引脚号 | Pin 8 | Pin 7 | Pin 6 | Pin 5 | Pin 4 | Pin 3 | Pin 2 | Pin 1 |
|-----------|-------|-------|-------|-------|-------|-------|-------|-------|
| 引脚定义 | SELNAND | OM4 | OM3 | OM2 | OM1 | GPN15 | GPN14 | GPN13 |
| Nandflash启动 | 1 | 0 | 0 | 1 | 1 | X | X | X |
| SD卡启动 | X | 1 | 1 | 1 | 1 | 0 | 0 | 0 |

> 注：
> 1. SW2开关ON时为"1"；OFF时为"0"，"X"为高电平或者低电平
> 2. OK6410开发板出厂默认设置为NAND FLASH启动方式

### 故障排查步骤
- 初始诊断
  - 将烧录好的SD卡插入开发板
  - 确保开发板电源正常供电
  - 通过USB线连接开发板和电脑
  - 打开DNW工具，选择正确的COM口
  - 观察DNW输出信息，确认通信正常

- 硬件检查
  - 检查SD卡是否正确插入卡槽
  - 确认USB线连接稳定
  - 检查电源指示灯状态
  - 确认开关拨码设置正确

- 软件更新
  - 通过DNW监控启动过程
  - 观察系统引导信息
  - 确认WinCE系统成功写入
  - 等待系统完全启动
- 成功启动
  - 经过上述步骤，开发板终于成功启动
  - LCD屏幕亮起，显示Windows CE启动画面
  - 出现熟悉的Windows CE界面和开始菜单
  - 触摸屏功能正常响应
  - 系统运行流畅，各项功能恢复正常

这一刻看到久违的Windows CE界面，让人感慨万千。经过一系列的故障排查和系统恢复，OK6410开发板终于重获新生，为后续的开发工作打下了基础。


## 参考资料

1. [OK6410 技术手册](https://picture.iczhiku.com/resource/eetop/SyisOEOrRFshsmVX.pdf)
2. [S3C6410 数据手册](#)
3. [相关论坛讨论](#) 